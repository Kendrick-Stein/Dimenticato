<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>意大利语背单词 - Dimenticato</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- 加载动画 -->
  <div id="loading" class="loading">
    <div class="spinner"></div>
    <p>加载中...</p>
  </div>

  <!-- 主容器 -->
  <div id="app" class="app hidden">
    
    <!-- 顶部导航栏 -->
    <header class="header">
      <h1>🇮🇹 意大利语背单词</h1>
      <div class="header-stats">
        <span class="stat">📚 词汇量: <strong id="totalWords">0</strong></span>
        <span class="stat">✅ 已掌握: <strong id="masteredWords">0</strong></span>
        <span class="stat">📊 进度: <strong id="progressPercent">0%</strong></span>
      </div>
    </header>

    <!-- 主内容区 -->
    <main class="main">
      
      <!-- 欢迎页面 -->
      <section id="welcomeScreen" class="screen active">
        <div class="welcome-card">
          <!-- 系统词汇库 -->
          <div class="vocab-section">
            <h2>🎯 系统词汇库</h2>
            <p class="subtitle">根据词频排序，从最常用的单词开始学习</p>
            
            <div class="level-buttons">
              <button class="level-btn vocab-source-btn" data-level="1000" data-source="system">
                <span class="level-icon">🌱</span>
                <span class="level-name">初级</span>
                <span class="level-count">1,000 词</span>
              </button>
              
              <button class="level-btn vocab-source-btn" data-level="3000" data-source="system">
                <span class="level-icon">🌿</span>
                <span class="level-name">中级</span>
                <span class="level-count">3,000 词</span>
              </button>
              
              <button class="level-btn vocab-source-btn" data-level="5000" data-source="system">
                <span class="level-icon">🌳</span>
                <span class="level-name">高级</span>
                <span class="level-count">5,000 词</span>
              </button>
              
              <button class="level-btn vocab-source-btn" data-level="all" data-source="system">
                <span class="level-icon">🌲</span>
                <span class="level-name">全部</span>
                <span class="level-count">28,787 词</span>
              </button>
            </div>
          </div>

          <!-- 自定义单词本 -->
          <div class="custom-wordbook-section">
            <h2>📝 我的单词本</h2>
            <p class="subtitle">导入并学习自定义单词本</p>
            
            <div class="wordbook-cards" id="wordbookCards">
              <!-- 动态生成单词本卡片 -->
            </div>
            
            <div class="import-wordbook-card">
              <input type="file" id="wordbookFileInput" accept=".json,.txt" style="display: none;">
              <button class="level-btn import-btn" id="importWordbookBtn">
                <span class="level-icon">➕</span>
                <span class="level-name">导入单词本</span>
                <span class="level-count">支持 JSON / TXT</span>
              </button>
              <button class="level-btn import-btn" id="createWordbookBtn" style="margin-top: 1rem;">
                <span class="level-icon">📝</span>
                <span class="level-name">创建新单词本</span>
                <span class="level-count">从零开始创建</span>
              </button>
              <p class="import-hint-small">
                <a href="custom_wordbook_template.json" download>JSON模板</a> | 
                <a href="custom_wordbook_template.txt" download>TXT模板</a>
              </p>
            </div>
          </div>

          <!-- 社区词本 -->
          <div class="community-wordbook-section">
            <h2>🌍 社区词本 <span class="new-badge">✨NEW</span></h2>
            <p class="subtitle">发现和分享优质学习资源</p>
            
            <div class="community-buttons">
              <button class="level-btn community-btn" onclick="CommunityWordbooks.showBrowseScreen()">
                <span class="level-icon">🔍</span>
                <span class="level-name">浏览社区词本</span>
                <span class="level-count">发现更多资源</span>
              </button>
              
              <button class="level-btn community-btn" onclick="CommunityWordbooks.showUploadDialog()">
                <span class="level-icon">⬆️</span>
                <span class="level-name">上传我的词本</span>
                <span class="level-count">分享给社区</span>
              </button>
            </div>
          </div>

          <!-- 学习模式选择 -->
          <div class="mode-selection">
            <h2>📖 选择学习模式</h2>
            <p class="subtitle">请先选择上方的词库，然后选择学习模式</p>
            
            <div class="mode-buttons">
              <button class="mode-btn" id="multipleChoiceBtn" disabled>
                <span class="mode-icon">✏️</span>
                <span class="mode-name">选择题模式</span>
                <span class="mode-desc">看意大利语选英语翻译</span>
              </button>
              
              <button class="mode-btn" id="spellingBtn" disabled>
                <span class="mode-icon">⌨️</span>
                <span class="mode-name">拼写模式</span>
                <span class="mode-desc">看英语拼写意大利语</span>
              </button>
              
              <button class="mode-btn" id="browseBtn" disabled>
                <span class="mode-icon">📚</span>
                <span class="mode-name">浏览模式</span>
                <span class="mode-desc">查看所有单词列表</span>
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- 选择题模式 -->
      <section id="multipleChoiceScreen" class="screen">
        <div class="quiz-container">
          <div class="quiz-header">
            <button class="back-btn" id="mcBackBtn">← 返回</button>
            <div class="quiz-progress">
              <span id="mcCurrentWord">1</span> / <span id="mcTotalWords">0</span>
            </div>
            <div class="quiz-score">
              正确率: <strong id="mcAccuracy">0%</strong>
            </div>
          </div>

          <div class="quiz-card">
            <div class="question-section">
              <p class="question-label">意大利语单词：</p>
              <h2 class="italian-word" id="mcItalianWord">-</h2>
              <button class="hint-btn hidden" id="mcShowHintBtn" onclick="MultipleChoice.showHint()">
                💡 显示提示
              </button>
              <p class="chinese-hint hidden" id="mcChineseHint"></p>
            </div>

            <div class="options-section">
              <p class="options-label">选择正确的英语翻译：</p>
              <div class="options-grid" id="mcOptions">
                <!-- 动态生成选项 -->
              </div>
            </div>
          </div>

          <div class="quiz-feedback hidden" id="mcFeedback">
            <p class="feedback-text"></p>
            <button class="next-btn" id="mcNextBtn">下一个 →</button>
          </div>
        </div>
      </section>

      <!-- 拼写模式 -->
      <section id="spellingScreen" class="screen">
        <div class="quiz-container">
          <div class="quiz-header">
            <button class="back-btn" id="spBackBtn">← 返回</button>
            <div class="quiz-progress">
              <span id="spCurrentWord">1</span> / <span id="spTotalWords">0</span>
            </div>
            <div class="quiz-score">
              正确率: <strong id="spAccuracy">0%</strong>
            </div>
          </div>

          <div class="quiz-card">
            <div class="question-section">
              <p class="question-label">英语翻译：</p>
              <h2 class="english-word" id="spEnglishWord">-</h2>
              <p class="chinese-hint hidden" id="spChineseHint"></p>
              <button class="pronunciation-btn" id="spPronunciationBtn" title="点击朗读意大利语发音">
                🔊 听发音
              </button>
            </div>

            <div class="spelling-section">
              <p class="options-label">请输入意大利语单词：</p>
              <input 
                type="text" 
                class="spelling-input" 
                id="spInput" 
                placeholder="输入意大利语..."
                autocomplete="off"
              >
              <button class="check-btn" id="spCheckBtn">检查答案</button>
            </div>
          </div>

          <div class="quiz-feedback hidden" id="spFeedback">
            <p class="feedback-text"></p>
            <button class="next-btn" id="spNextBtn">下一个 →</button>
          </div>
        </div>
      </section>

      <!-- 浏览模式 -->
      <section id="browseScreen" class="screen">
        <div class="browse-container">
          <div class="browse-header">
            <button class="back-btn" id="brBackBtn">← 返回</button>
            <input 
              type="text" 
              class="search-input" 
              id="searchInput" 
              placeholder="🔍 搜索单词或翻译..."
            >
            <button class="filter-btn" id="filterBtn">
              <span id="filterText">全部</span> ▼
            </button>
          </div>

          <div class="word-list" id="wordList">
            <!-- 动态生成单词列表 -->
          </div>
        </div>
      </section>

    </main>

    <!-- 底部工具栏 -->
    <footer class="footer">
      <button class="footer-btn" id="exportDataBtn">
        📤 导出数据
      </button>
      <button class="footer-btn" id="importDataBtn">
        📥 导入数据
      </button>
      <button class="footer-btn" id="resetBtn">
        🔄 重置进度
      </button>
      <button class="footer-btn" id="statsBtn">
        📊 查看统计
      </button>
      <button class="footer-btn" id="themeBtn">
        🌓 切换主题
      </button>
      <button class="footer-btn" id="helpBtn">
        📖 使用说明
      </button>
    </footer>

  </div>

  <!-- 统计弹窗 -->
  <div id="statsModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>📊 学习统计</h3>
        <button class="close-btn" id="closeStatsBtn">×</button>
      </div>
      <div class="modal-body">
        <div class="stat-item">
          <span class="stat-label">总学习单词数：</span>
          <span class="stat-value" id="statTotalLearned">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">已掌握单词数：</span>
          <span class="stat-value" id="statMastered">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">学习进度：</span>
          <span class="stat-value" id="statProgress">0%</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">选择题练习次数：</span>
          <span class="stat-value" id="statMCAttempts">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">拼写练习次数：</span>
          <span class="stat-value" id="statSpAttempts">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">总正确率：</span>
          <span class="stat-value" id="statAccuracy">0%</span>
        </div>
      </div>
    </div>
  </div>

  <!-- 单词本编辑器模态框 -->
  <div id="wordbookEditorModal" class="modal hidden">
    <div class="modal-content editor-modal-content">
      <div class="modal-header">
        <h3>📝 编辑单词本: <span id="editorWordbookName"></span></h3>
        <button class="close-btn" onclick="WordbookEditor.hideEditorModal()">×</button>
      </div>
      <div class="modal-body editor-modal-body">
        <div class="editor-toolbar">
          <div style="display: flex; gap: 0.5rem;">
            <button class="editor-toolbar-btn" onclick="WordbookEditor.addNewWord()">
              ➕ 添加单词
            </button>
            <button class="editor-toolbar-btn" onclick="WordbookEditor.batchImportWords()">
              📥 批量添加新单词
            </button>
            <button class="editor-toolbar-btn" onclick="WordbookEditor.showExportDialog(WordbookEditor.currentEditingWordbook.id)" title="导出单词本">
              📤 导出
            </button>
          </div>
          <input type="file" id="editorBatchImportInput" accept=".txt" style="display: none;">
          <div class="editor-batch-actions" style="display: none;">
            <button class="editor-toolbar-btn danger" onclick="WordbookEditor.batchDelete()">
              🗑️ 删除选中
            </button>
          </div>
        </div>
        <div id="editorWordList" class="editor-word-list">
          <!-- 动态生成单词列表 -->
        </div>
      </div>
    </div>
  </div>

  <!-- 单词编辑对话框 -->
  <div id="wordEditDialog" class="modal hidden">
    <div class="modal-content" style="max-width: 600px;">
      <div class="modal-header">
        <h3 id="wordEditDialogTitle">编辑单词</h3>
        <button class="close-btn" onclick="WordbookEditor.hideWordEditDialog()">×</button>
      </div>
      <div class="modal-body">
        <form id="wordEditForm" onsubmit="event.preventDefault(); WordbookEditor.saveWordEdit();">
          <div class="form-group">
            <label for="editWordItalian">意大利语 *</label>
            <input type="text" id="editWordItalian" class="form-input" required>
          </div>
          <div class="form-group">
            <label for="editWordEnglish">英语翻译 *</label>
            <input type="text" id="editWordEnglish" class="form-input" required>
          </div>
          <div class="form-group">
            <label for="editWordChinese">中文翻译</label>
            <input type="text" id="editWordChinese" class="form-input">
          </div>
          <div class="form-group">
            <label for="editWordNotes">笔记</label>
            <textarea id="editWordNotes" class="form-textarea" rows="3"></textarea>
          </div>
          <div class="form-actions">
            <button type="button" class="form-btn cancel" onclick="WordbookEditor.hideWordEditDialog()">取消</button>
            <button type="submit" class="form-btn primary">保存</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- 单词本选择对话框 -->
  <div id="wordbookSelectDialog" class="modal hidden">
    <div class="modal-content" style="max-width: 500px;">
      <div class="modal-header">
        <h3>📚 选择单词本</h3>
        <button class="close-btn" onclick="WordbookEditor.hideWordbookSelectDialog()">×</button>
      </div>
      <div class="modal-body">
        <p style="margin-bottom: 1rem; color: var(--text-secondary);">将单词添加到：</p>
        <div id="wordbookSelectList" class="wordbook-select-list">
          <!-- 动态生成单词本列表 -->
        </div>
      </div>
    </div>
  </div>

  <!-- 增强统计模态框 -->
  <div id="enhancedStatsModal" class="modal hidden">
    <div class="modal-content enhanced-stats-modal">
      <div class="modal-header">
        <h3>📊 学习统计</h3>
        <button class="close-btn" onclick="hideEnhancedStatsModal()">×</button>
      </div>
      <div class="modal-body enhanced-stats-body">
        <!-- 标签页导航 -->
        <div class="stats-tabs">
          <button class="stats-tab-btn active" data-tab="overview" onclick="switchStatsTab('overview')">
            概览
          </button>
          <button class="stats-tab-btn" data-tab="charts" onclick="switchStatsTab('charts')">
            图表
          </button>
          <button class="stats-tab-btn" data-tab="history" onclick="switchStatsTab('history')">
            历史记录
          </button>
        </div>

        <!-- 概览标签页 -->
        <div id="overviewTab" class="stats-tab-content active">
          <div class="stats-section">
            <h4>📈 今日统计</h4>
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-card-label">学习单词</div>
                <div class="stat-card-value" id="enhancedStatTodayWords">0</div>
              </div>
              <div class="stat-card">
                <div class="stat-card-label">学习时长</div>
                <div class="stat-card-value" id="enhancedStatTodayDuration">0分钟</div>
              </div>
              <div class="stat-card">
                <div class="stat-card-label">正确率</div>
                <div class="stat-card-value" id="enhancedStatTodayAccuracy">0%</div>
              </div>
            </div>
          </div>

          <div class="stats-section">
            <h4>🏆 总计统计</h4>
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-card-label">累计学习单词</div>
                <div class="stat-card-value" id="enhancedStatTotalWords">0</div>
              </div>
              <div class="stat-card">
                <div class="stat-card-label">累计学习时长</div>
                <div class="stat-card-value" id="enhancedStatTotalDuration">0分钟</div>
              </div>
              <div class="stat-card">
                <div class="stat-card-label">平均正确率</div>
                <div class="stat-card-value" id="enhancedStatTotalAccuracy">0%</div>
              </div>
              <div class="stat-card">
                <div class="stat-card-label">练习次数</div>
                <div class="stat-card-value" id="enhancedStatTotalAttempts">0</div>
              </div>
            </div>
          </div>
        </div>

        <!-- 图表标签页 -->
        <div id="chartsTab" class="stats-tab-content">
          <div class="chart-container">
            <canvas id="weeklyTrendChart"></canvas>
          </div>
          <div class="charts-row">
            <div class="chart-container">
              <canvas id="dailyWordsChart"></canvas>
            </div>
            <div class="chart-container">
              <canvas id="masteryDistributionChart"></canvas>
            </div>
          </div>
        </div>

        <!-- 历史记录标签页 -->
        <div id="historyTab" class="stats-tab-content">
          <h4>📅 最近 7 天学习记录</h4>
          <div class="stats-table-container">
            <table class="stats-table">
              <thead>
                <tr>
                  <th>日期</th>
                  <th>学习单词</th>
                  <th>学习时长</th>
                  <th>练习次数</th>
                  <th>正确率</th>
                </tr>
              </thead>
              <tbody id="dailyStatsTableBody">
                <!-- 动态生成 -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 数据导入文件选择器 -->
  <input type="file" id="importDataFileInput" accept=".json" style="display: none;">

  <!-- 社区词本上传模态框 -->
  <div id="communityUploadModal" class="modal hidden">
    <div class="modal-content" style="max-width: 600px;">
      <div class="modal-header">
        <h3>⬆️ 上传词本到社区</h3>
        <button class="close-btn" onclick="CommunityWordbooks.hideUploadDialog()">×</button>
      </div>
      <div class="modal-body">
        <form id="communityUploadForm" onsubmit="event.preventDefault(); CommunityWordbooks.uploadWordbook();">
          <div class="form-group">
            <label for="uploadWordbookName">词本名称 *</label>
            <input type="text" id="uploadWordbookName" class="form-input" required placeholder="例如：意大利旅游常用语">
          </div>
          
          <div class="form-group">
            <label for="uploadAuthorName">作者名 *</label>
            <input type="text" id="uploadAuthorName" class="form-input" required placeholder="你的名字或昵称">
          </div>
          
          <div class="form-group">
            <label for="uploadDifficulty">难度级别 *</label>
            <select id="uploadDifficulty" class="form-input" required>
              <option value="Beginner">🌱 初级 (Beginner)</option>
              <option value="Intermediate">🌿 中级 (Intermediate)</option>
              <option value="Advanced">🌳 高级 (Advanced)</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>主题标签</label>
            <div class="tag-selector">
              <label class="tag-option"><input type="checkbox" class="tag-checkbox" value="旅游"> 旅游</label>
              <label class="tag-option"><input type="checkbox" class="tag-checkbox" value="商务"> 商务</label>
              <label class="tag-option"><input type="checkbox" class="tag-checkbox" value="日常"> 日常</label>
              <label class="tag-option"><input type="checkbox" class="tag-checkbox" value="美食"> 美食</label>
              <label class="tag-option"><input type="checkbox" class="tag-checkbox" value="文化"> 文化</label>
              <label class="tag-option"><input type="checkbox" class="tag-checkbox" value="学术"> 学术</label>
              <label class="tag-option"><input type="checkbox" class="tag-checkbox" value="医疗"> 医疗</label>
              <label class="tag-option"><input type="checkbox" class="tag-checkbox" value="运动"> 运动</label>
              <label class="tag-option"><input type="checkbox" class="tag-checkbox" value="艺术"> 艺术</label>
              <label class="tag-option"><input type="checkbox" class="tag-checkbox" value="科技"> 科技</label>
            </div>
          </div>
          
          <div class="form-group">
            <label for="uploadDescription">描述</label>
            <textarea id="uploadDescription" class="form-textarea" rows="3" placeholder="简单介绍一下这个词本的内容..."></textarea>
          </div>
          
          <div class="form-group">
            <label for="uploadFileInput">选择文件 * (JSON/TXT, 最大5MB)</label>
            <input type="file" id="uploadFileInput" accept=".json,.txt" style="display: none;" onchange="CommunityWordbooks.selectFile()">
            <button type="button" class="form-btn" onclick="document.getElementById('uploadFileInput').click()">
              📎 选择文件
            </button>
            <span id="uploadFileName" style="margin-left: 1rem; color: var(--text-secondary);">未选择文件</span>
          </div>
          
          <div class="form-actions">
            <button type="button" class="form-btn cancel" onclick="CommunityWordbooks.hideUploadDialog()">取消</button>
            <button type="submit" class="form-btn primary" id="uploadWordbookBtn">🚀 上传到社区</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- 社区词本浏览页面 -->
  <section id="communityBrowseScreen" class="screen community-browse-screen">
    <div class="browse-container">
      <div class="browse-header">
        <button class="back-btn" onclick="CommunityWordbooks.backToWelcome()">← 返回</button>
        <input 
          type="text" 
          class="search-input" 
          id="communitySearchInput" 
          placeholder="🔍 搜索词本名称..."
          oninput="CommunityWordbooks.searchWordbooks(this.value)"
        >
        <select class="filter-select" onchange="CommunityWordbooks.updateDifficultyFilter(this.value)">
          <option value="all">全部难度</option>
          <option value="Beginner">🌱 初级</option>
          <option value="Intermediate">🌿 中级</option>
          <option value="Advanced">🌳 高级</option>
        </select>
      </div>
      
      <div class="community-wordbook-list" id="communityWordbookList">
        <!-- 动态生成词本列表 -->
      </div>
    </div>
  </section>

  <!-- 社区词本预览模态框 -->
  <div id="communityPreviewModal" class="modal hidden">
    <div class="modal-content" style="max-width: 700px;">
      <div class="modal-header">
        <h3>👁️ 预览: <span id="previewWordbookTitle"></span></h3>
        <button class="close-btn" onclick="CommunityWordbooks.hidePreviewModal()">×</button>
      </div>
      <div class="modal-body">
        <div id="previewWordbookMeta"></div>
        <div id="previewWordList" class="preview-word-list"></div>
        <div class="form-actions">
          <button type="button" class="form-btn cancel" onclick="CommunityWordbooks.hidePreviewModal()">关闭</button>
          <button type="button" class="form-btn primary" id="previewDownloadBtn">📥 导入学习</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 帮助弹窗 -->
  <div id="helpModal" class="modal hidden">
    <div class="modal-content help-modal-content">
      <div class="modal-header">
        <h3>📖 使用说明</h3>
        <button class="close-btn" id="closeHelpBtn">×</button>
      </div>
      <div class="modal-body help-modal-body">
        <div class="help-section">
          <h2>🇮🇹 Dimenticato - 意大利语背单词应用</h2>
          <p class="help-intro">一个纯静态的意大利语词汇学习网页应用，支持本地离线使用。</p>
        </div>

        <div class="help-section">
          <h3>✨ 功能特点</h3>
          
          <div class="feature-box">
            <h4>📚 系统词汇库</h4>
            <ul>
              <li><strong>28,787</strong> 个意大利语单词及英语翻译</li>
              <li>按使用频率排序（从最常用到最少用）</li>
              <li>四个难度级别：
                <ul>
                  <li>🌱 初级：1,000 个高频词</li>
                  <li>🌿 中级：3,000 个常用词</li>
                  <li>🌳 高级：5,000 个词汇</li>
                  <li>🌲 全部：28,787 个完整词库</li>
                </ul>
              </li>
            </ul>
          </div>

          <div class="feature-box">
            <h4>📝 自定义单词本</h4>
            <ul>
              <li><strong>导入自己的单词本</strong> - 支持 JSON 和 TXT 两种格式</li>
              <li><strong>独立进度跟踪</strong> - 每个单词本的学习进度独立保存</li>
              <li><strong>添加个人笔记</strong> - 为每个单词添加你自己的学习笔记</li>
              <li><strong>随时管理</strong> - 导入、删除、切换单词本</li>
            </ul>
          </div>

          <div class="feature-box highlight">
            <h4>📄 TXT 格式 - 超简单的记笔记方式！</h4>
            <p>不需要处理复杂的 JSON 语法，用记事本就能创建单词本！</p>
            
            <p><strong>基本规则：</strong></p>
            <ol>
              <li>每个单词用<strong>空行</strong>分隔</li>
              <li>每个单词包含 <strong>3-4 行</strong>：
                <ul>
                  <li>第 1 行：意大利语</li>
                  <li>第 2 行：英语</li>
                  <li>第 3 行：中文</li>
                  <li>第 4 行（可选）：笔记</li>
                </ul>
              </li>
            </ol>

            <p><strong>示例：</strong></p>
            <pre class="code-block">ciao
hello, hi, bye
你好，再见
非正式场合使用，既可以表示问候也可以表示告别

grazie
thank you
谢谢
grazie mille = 非常感谢

acqua
water
水

amore
love
爱
意大利文化中非常重要的词汇</pre>

            <p><strong>优势：</strong></p>
            <ul>
              <li>✏️ 用任何文本编辑器都能编辑</li>
              <li>🚀 快速记录，不用考虑语法</li>
              <li>💾 纯文本，方便备份和版本控制</li>
              <li>📝 想加笔记就加，不加也行</li>
            </ul>

            <p><strong>使用方法：</strong></p>
            <ol>
              <li>创建 <code>.txt</code> 文件，按格式添加单词</li>
              <li>在应用中点击"导入单词本"</li>
              <li>选择你的 TXT 文件</li>
              <li>开始学习！</li>
            </ol>
          </div>

          <div class="feature-box">
            <h4>🎯 学习模式</h4>
            <ul>
              <li><strong>✏️ 选择题模式</strong> - 显示意大利语单词，从4个选项中选择正确的英语翻译
                <ul>
                  <li>💡 中文提示默认隐藏，需要时点击"显示提示"按钮查看</li>
                  <li>避免直接给出答案，提高学习效果</li>
                </ul>
              </li>
              <li><strong>⌨️ 拼写模式</strong> - 显示英语翻译，输入意大利语单词
                <ul>
                  <li>中文提示默认显示，帮助理解单词含义</li>
                </ul>
              </li>
              <li><strong>📖 浏览模式</strong> - 查看完整单词列表，支持搜索和过滤</li>
            </ul>
          </div>
        </div>

        <div class="help-section">
          <h3>🚀 使用方法</h3>
          
          <div class="usage-box">
            <h4>使用系统词汇库：</h4>
            <ol>
              <li><strong>选择难度级别</strong> - 初级/中级/高级/全部</li>
              <li><strong>选择学习模式</strong> - 选择题/拼写/浏览模式</li>
              <li><strong>开始学习</strong> - 进度自动保存</li>
            </ol>
          </div>

          <div class="usage-box">
            <h4>使用自定义单词本：</h4>
            <ol>
              <li><strong>创建单词本</strong> - 用记事本创建 <code>.txt</code> 文件，按格式添加单词</li>
              <li><strong>导入单词本</strong> - 点击"导入单词本"按钮，选择你的文件</li>
              <li><strong>选择单词本</strong> - 点击单词本卡片激活</li>
              <li><strong>选择学习模式</strong> - 选择题/拼写/浏览模式</li>
              <li><strong>开始学习</strong> - 每个单词本的进度独立保存</li>
            </ol>
          </div>

          <p class="help-tip">💡 <strong>提示：</strong>顶部始终显示当前词汇量、已掌握数量和学习进度</p>
        </div>

        <div class="help-section">
          <h3>🌟 其他功能</h3>
          
          <div class="feature-box">
            <h4>📤 导出/导入学习记录</h4>
            <ul>
              <li><strong>📤 导出数据</strong> - 将所有学习进度、统计数据、自定义单词本导出为 JSON 文件
                <ul>
                  <li>包含系统词汇和自定义单词本的学习进度</li>
                  <li>包含每日统计和练习记录</li>
                  <li>文件名自动包含导出日期时间</li>
                </ul>
              </li>
              <li><strong>📥 导入数据</strong> - 从之前导出的 JSON 文件恢复学习记录
                <ul>
                  <li><strong>覆盖模式</strong>：清空现有数据，用导入数据完全替换</li>
                  <li><strong>合并模式</strong>：保留现有数据，将导入数据合并进来</li>
                  <li>适用于跨设备同步学习进度</li>
                </ul>
              </li>
            </ul>
            <p class="help-tip">💡 <strong>提示：</strong>建议定期导出数据备份，换设备时可以通过导入恢复学习进度！</p>
          </div>

          <div class="feature-box">
            <h4>📝 浏览模式高级功能</h4>
            <ul>
              <li><strong>添加到单词本</strong> - 在浏览模式中，点击单词旁的"➕"按钮可将单词添加到自定义单词本
                <ul>
                  <li>可以选择添加到哪个单词本</li>
                  <li>方便从系统词库中挑选单词创建个性化学习集</li>
                </ul>
              </li>
              <li><strong>搜索过滤</strong> - 支持按意大利语或英语搜索</li>
              <li><strong>状态筛选</strong> - 可切换显示全部/已掌握/未掌握单词</li>
            </ul>
          </div>

          <ul>
            <li><strong>📊 查看统计</strong> - 查看学习数据和正确率</li>
            <li><strong>🌓 切换主题</strong> - 在浅色和深色主题之间切换</li>
            <li><strong>🔄 重置进度</strong> - 清除所有学习记录（需确认）</li>
          </ul>
        </div>

        <div class="help-section">
          <p class="help-footer">祝学习愉快！Buono studio! 🇮🇹</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Chart.js 库 (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  
  <!-- Supabase SDK (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  
  <script src="vocabulary.js"></script>
  <script src="supabase-config.js"></script>
  <script src="community-wordbooks.js"></script>
  <script src="app.js"></script>
  <script src="app-enhanced.js"></script>
  <script src="stats-charts.js"></script>
</body>
</html>
